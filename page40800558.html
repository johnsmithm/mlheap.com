<!DOCTYPE html><html><head><meta charset="utf-8" /><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /> <!--metatextblock--><title>Blank page</title><meta property="og:url" content="https://mlheap.com/chat" /><meta property="og:title" content="Blank page" /><meta property="og:description" content="" /><meta property="og:type" content="website" /><link rel="canonical" href="https://mlheap.com/chat"><!--/metatextblock--><meta name="format-detection" content="telephone=no" /><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://ws.tildacdn.com"><link rel="shortcut icon" href="images/tildafavicon.ico" type="image/x-icon" /><!-- Assets --><script src="https://neo.tildacdn.com/js/tilda-fallback-1.0.min.js" async charset="utf-8"></script><link rel="stylesheet" href="css/tilda-grid-3.0.min.css" type="text/css" media="all" onerror="this.loaderr='y';"/><link rel="stylesheet" href="css/tilda-blocks-page40800558.min.css?t=1698603962" type="text/css" media="all" onerror="this.loaderr='y';" /><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&subset=latin,cyrillic" rel="stylesheet"><link rel="stylesheet" href="css/highlight.min.css" type="text/css" media="all" onerror="this.loaderr='y';" /><script nomodule src="js/tilda-polyfill-1.0.min.js" charset="utf-8"></script><script type="text/javascript">function t_onReady(func) {
if (document.readyState != 'loading') {
func();
} else {
document.addEventListener('DOMContentLoaded', func);
}
}
function t_onFuncLoad(funcName, okFunc, time) {
if (typeof window[funcName] === 'function') {
okFunc();
} else {
setTimeout(function() {
t_onFuncLoad(funcName, okFunc, time);
},(time || 100));
}
}function t_throttle(fn, threshhold, scope) {return function () {fn.apply(scope || this, arguments);};}</script><script src="js/jquery-1.10.2.min.js" charset="utf-8" onerror="this.loaderr='y';"></script> <script src="js/tilda-scripts-3.0.min.js" charset="utf-8" defer onerror="this.loaderr='y';"></script><script src="js/tilda-blocks-page40800558.min.js?t=1698603962" charset="utf-8" async onerror="this.loaderr='y';"></script><script src="js/lazyload-1.3.min.export.js" charset="utf-8" async onerror="this.loaderr='y';"></script><script src="js/highlight.min.js" charset="utf-8" onerror="this.loaderr='y';"></script><script src="js/tilda-menu-1.0.min.js" charset="utf-8" async onerror="this.loaderr='y';"></script><script src="js/tilda-skiplink-1.0.min.js" charset="utf-8" async onerror="this.loaderr='y';"></script><script src="js/tilda-events-1.0.min.js" charset="utf-8" async onerror="this.loaderr='y';"></script><script type="text/javascript">window.dataLayer = window.dataLayer || [];</script><script type="text/javascript">(function () {
if((/bot|google|yandex|baidu|bing|msn|duckduckbot|teoma|slurp|crawler|spider|robot|crawling|facebook/i.test(navigator.userAgent))===false && typeof(sessionStorage)!='undefined' && sessionStorage.getItem('visited')!=='y' && document.visibilityState){
var style=document.createElement('style');
style.type='text/css';
style.innerHTML='@media screen and (min-width: 980px) {.t-records {opacity: 0;}.t-records_animated {-webkit-transition: opacity ease-in-out .2s;-moz-transition: opacity ease-in-out .2s;-o-transition: opacity ease-in-out .2s;transition: opacity ease-in-out .2s;}.t-records.t-records_visible {opacity: 1;}}';
document.getElementsByTagName('head')[0].appendChild(style);
function t_setvisRecs(){
var alr=document.querySelectorAll('.t-records');
Array.prototype.forEach.call(alr, function(el) {
el.classList.add("t-records_animated");
});
setTimeout(function () {
Array.prototype.forEach.call(alr, function(el) {
el.classList.add("t-records_visible");
});
sessionStorage.setItem("visited", "y");
}, 400);
} 
document.addEventListener('DOMContentLoaded', t_setvisRecs);
}
})();</script></head><body class="t-body" style="margin:0;"><!--allrecords--><div id="allrecords" data-tilda-export="yes" class="t-records" data-hook="blocks-collection-content-node" data-tilda-project-id="3954701" data-tilda-page-id="40800558" data-tilda-page-alias="chat" data-tilda-formskey="ee476770ee9d855b5902a67fbf75a79b" data-tilda-lazy="yes" ><!--header--><header id="t-header" class="t-records" data-hook="blocks-collection-content-node" data-tilda-project-id="3954701" data-tilda-page-id="18776548" data-tilda-formskey="ee476770ee9d855b5902a67fbf75a79b" data-tilda-lazy="yes" ><div id="rec303274648" class="r t-rec" style=" " data-animationappear="off" data-record-type="466" ><!-- T466 --><div id="nav303274648marker"></div><div id="nav303274648" class="t466 t466__positionstatic" data-menu="yes" data-appearoffset="" style=""><div class="t466__container"><div class="t466__container__bg t466__container__bg_main" style="background-color: rgba(0,0,0,1); " data-bgcolor-hex="#000000" data-bgcolor-rgba="rgba(0,0,0,1)" data-bgopacity="1" data-menu-shadow="0px 1px 3px rgba(0,0,0,0.)"></div><div class="t466__item"><a class="t466__logo" href="/" style="color:#ffffff;"><div field="title" class="t-name t-descr_xxs" style="color:#ffffff;">MLHEAP</div></a></div><div class="t466__item t466__menu"><a class="t-name t-descr_xxs t-menu__link-item" href="https://calendly.com/aiconsultant/15min?month=2021-04" style="color:#ffffff;font-weight:600;" data-menu-item-number="1">Book a free consultation</a></div><div class="t466__item t466__menu"><a class="t-name t-descr_xxs t-menu__link-item" href="/news" style="color:#ffffff;font-weight:600;" data-menu-item-number="2">Newsletter</a></div><div class="t466__item t466__menu"><a class="t-name t-descr_xxs t-menu__link-item" href="/#rec496530810" style="color:#ffffff;font-weight:600;" data-menu-item-number="3">Services</a></div><button type="button" 
class="t-menuburger t-menuburger_first t-menuburger__small" 
aria-label="Navigation menu" 
aria-expanded="false"><span style="background-color:#000000;"></span><span style="background-color:#000000;"></span><span style="background-color:#000000;"></span><span style="background-color:#000000;"></span></button><script>function t_menuburger_init(recid) {
var rec = document.querySelector('#rec' + recid);
if (!rec) return;
var burger = rec.querySelector('.t-menuburger');
if (!burger) return;
var isSecondStyle = burger.classList.contains('t-menuburger_second');
if (isSecondStyle && !window.isMobile && !('ontouchend' in document)) {
burger.addEventListener('mouseenter', function() {
if (burger.classList.contains('t-menuburger-opened')) return;
burger.classList.remove('t-menuburger-unhovered');
burger.classList.add('t-menuburger-hovered');
});
burger.addEventListener('mouseleave', function() {
if (burger.classList.contains('t-menuburger-opened')) return;
burger.classList.remove('t-menuburger-hovered');
burger.classList.add('t-menuburger-unhovered');
setTimeout(function() {
burger.classList.remove('t-menuburger-unhovered');
}, 300);
});
}
burger.addEventListener('click', function() {
if (!burger.closest('.tmenu-mobile') &&
!burger.closest('.t450__burger_container') &&
!burger.closest('.t466__container') &&
!burger.closest('.t204__burger') &&
!burger.closest('.t199__js__menu-toggler')) {
burger.classList.toggle('t-menuburger-opened');
burger.classList.remove('t-menuburger-unhovered');
}
});
var menu = rec.querySelector('[data-menu="yes"]');
if (!menu) return;
var menuLinks = menu.querySelectorAll('.t-menu__link-item');
var submenuClassList = ['t978__menu-link_hook', 't978__tm-link', 't966__tm-link', 't794__tm-link', 't-menusub__target-link'];
Array.prototype.forEach.call(menuLinks, function (link) {
link.addEventListener('click', function () {
var isSubmenuHook = submenuClassList.some(function (submenuClass) {
return link.classList.contains(submenuClass);
});
if (isSubmenuHook) return;
burger.classList.remove('t-menuburger-opened');
});
});
menu.addEventListener('clickedAnchorInTooltipMenu', function () {
burger.classList.remove('t-menuburger-opened');
});
}
t_onReady(function() {
t_onFuncLoad('t_menuburger_init', function(){t_menuburger_init('303274648');});
});</script><style>.t-menuburger {
position: relative;
flex-shrink: 0;
width: 28px;
height: 20px;
padding: 0;
border: none;
background-color: transparent;
outline: none;
-webkit-transform: rotate(0deg);
transform: rotate(0deg);
transition: transform .5s ease-in-out;
cursor: pointer;
z-index: 999;
}
/*---menu burger lines---*/
.t-menuburger span {
display: block;
position: absolute;
width: 100%;
opacity: 1;
left: 0;
-webkit-transform: rotate(0deg);
transform: rotate(0deg);
transition: .25s ease-in-out;
height: 3px;
background-color: #000;
}
.t-menuburger span:nth-child(1) {
top: 0px;
}
.t-menuburger span:nth-child(2),
.t-menuburger span:nth-child(3) {
top: 8px;
}
.t-menuburger span:nth-child(4) {
top: 16px;
}
/*menu burger big*/
.t-menuburger__big {
width: 42px;
height: 32px;
}
.t-menuburger__big span {
height: 5px;
}
.t-menuburger__big span:nth-child(2),
.t-menuburger__big span:nth-child(3) {
top: 13px;
}
.t-menuburger__big span:nth-child(4) {
top: 26px;
}
/*menu burger small*/
.t-menuburger__small {
width: 22px;
height: 14px;
}
.t-menuburger__small span {
height: 2px;
}
.t-menuburger__small span:nth-child(2),
.t-menuburger__small span:nth-child(3) {
top: 6px;
}
.t-menuburger__small span:nth-child(4) {
top: 12px;
}
/*menu burger opened*/
.t-menuburger-opened span:nth-child(1) {
top: 8px;
width: 0%;
left: 50%;
}
.t-menuburger-opened span:nth-child(2) {
-webkit-transform: rotate(45deg);
transform: rotate(45deg);
}
.t-menuburger-opened span:nth-child(3) {
-webkit-transform: rotate(-45deg);
transform: rotate(-45deg);
}
.t-menuburger-opened span:nth-child(4) {
top: 8px;
width: 0%;
left: 50%;
}
.t-menuburger-opened.t-menuburger__big span:nth-child(1) {
top: 6px;
}
.t-menuburger-opened.t-menuburger__big span:nth-child(4) {
top: 18px;
}
.t-menuburger-opened.t-menuburger__small span:nth-child(1),
.t-menuburger-opened.t-menuburger__small span:nth-child(4) {
top: 6px;
}
/*---menu burger first style---*/
@media (hover), (min-width:0\0) {
.t-menuburger_first:hover span:nth-child(1) {
transform: translateY(1px);
}
.t-menuburger_first:hover span:nth-child(4) {
transform: translateY(-1px);
}
.t-menuburger_first.t-menuburger__big:hover span:nth-child(1) {
transform: translateY(3px);
}
.t-menuburger_first.t-menuburger__big:hover span:nth-child(4) {
transform: translateY(-3px);
}
}
/*---menu burger second style---*/
.t-menuburger_second span:nth-child(2),
.t-menuburger_second span:nth-child(3) {
width: 80%;
left: 20%;
right: 0;
}
@media (hover), (min-width:0\0) {
.t-menuburger_second.t-menuburger-hovered span:nth-child(2),
.t-menuburger_second.t-menuburger-hovered span:nth-child(3) {
animation: t-menuburger-anim 0.3s ease-out normal forwards;
}
.t-menuburger_second.t-menuburger-unhovered span:nth-child(2),
.t-menuburger_second.t-menuburger-unhovered span:nth-child(3) {
animation: t-menuburger-anim2 0.3s ease-out normal forwards;
}
}
.t-menuburger_second.t-menuburger-opened span:nth-child(2),
.t-menuburger_second.t-menuburger-opened span:nth-child(3){
left: 0;
right: 0;
width: 100%!important;
}
/*---menu burger third style---*/
.t-menuburger_third span:nth-child(4) {
width: 70%;
left: unset;
right: 0;
}
@media (hover), (min-width:0\0) {
.t-menuburger_third:not(.t-menuburger-opened):hover span:nth-child(4) {
width: 100%;
}
}
.t-menuburger_third.t-menuburger-opened span:nth-child(4) {
width: 0!important;
right: 50%;
}
/*---menu burger fourth style---*/
.t-menuburger_fourth {
height: 12px;
}
.t-menuburger_fourth.t-menuburger__small {
height: 8px;
}
.t-menuburger_fourth.t-menuburger__big {
height: 18px;
}
.t-menuburger_fourth span:nth-child(2),
.t-menuburger_fourth span:nth-child(3) {
top: 4px;
opacity: 0;
}
.t-menuburger_fourth span:nth-child(4) {
top: 8px;
}
.t-menuburger_fourth.t-menuburger__small span:nth-child(2),
.t-menuburger_fourth.t-menuburger__small span:nth-child(3) {
top: 3px;
}
.t-menuburger_fourth.t-menuburger__small span:nth-child(4) {
top: 6px;
}
.t-menuburger_fourth.t-menuburger__small span:nth-child(2),
.t-menuburger_fourth.t-menuburger__small span:nth-child(3) {
top: 3px;
}
.t-menuburger_fourth.t-menuburger__small span:nth-child(4) {
top: 6px;
}
.t-menuburger_fourth.t-menuburger__big span:nth-child(2),
.t-menuburger_fourth.t-menuburger__big span:nth-child(3) {
top: 6px;
}
.t-menuburger_fourth.t-menuburger__big span:nth-child(4) {
top: 12px;
}
@media (hover), (min-width:0\0) {
.t-menuburger_fourth:not(.t-menuburger-opened):hover span:nth-child(1) {
transform: translateY(1px);
}
.t-menuburger_fourth:not(.t-menuburger-opened):hover span:nth-child(4) {
transform: translateY(-1px);
}
.t-menuburger_fourth.t-menuburger__big:not(.t-menuburger-opened):hover span:nth-child(1) {
transform: translateY(3px);
}
.t-menuburger_fourth.t-menuburger__big:not(.t-menuburger-opened):hover span:nth-child(4) {
transform: translateY(-3px);
}
}
.t-menuburger_fourth.t-menuburger-opened span:nth-child(1),
.t-menuburger_fourth.t-menuburger-opened span:nth-child(4) {
top: 4px;
}
.t-menuburger_fourth.t-menuburger-opened span:nth-child(2),
.t-menuburger_fourth.t-menuburger-opened span:nth-child(3) {
opacity: 1;
}
/*---menu burger animations---*/
@keyframes t-menuburger-anim {
0% {
width: 80%;
left: 20%;
right: 0;
}
50% {
width: 100%;
left: 0;
right: 0;
}
100% {
width: 80%;
left: 0;
right: 20%;
}
}
@keyframes t-menuburger-anim2 {
0% {
width: 80%;
left: 0;
}
50% {
width: 100%;
right: 0;
left: 0;
}
100% {
width: 80%;
left: 20%;
right: 0;
}
}</style> </div><div class="t466__mobile"><div class="t466__container"><div class="t466__container__bg" style="background-color: rgba(0,0,0,1); " data-bgcolor-hex="#000000" data-bgcolor-rgba="rgba(0,0,0,1)" data-bgopacity="1" data-menu-shadow="0px 1px 3px rgba(0,0,0,0.)"></div><div class="t466__item t466__menu"><a class="t-name t-descr_xxs" href="https://calendly.com/aiconsultant/15min?month=2021-04" style="color:#ffffff;font-weight:600;" data-menu-item-number="1">Book a free consultation</a></div><div class="t466__item t466__menu"><a class="t-name t-descr_xxs" href="/news" style="color:#ffffff;font-weight:600;" data-menu-item-number="2">Newsletter</a></div><div class="t466__item t466__menu"><a class="t-name t-descr_xxs" href="/#rec496530810" style="color:#ffffff;font-weight:600;" data-menu-item-number="3">Services</a></div></div></div></div><script>t_onReady(function () {
var rec = document.querySelector('#rec303274648');
if (!rec) return;
var wrapperBlock = rec.querySelector('.t466');
if (!wrapperBlock) return;
t_onFuncLoad('t466_initMobileMenu', function () {
t466_initMobileMenu('303274648');
});
rec.setAttribute('data-animationappear', 'off');
rec.style.opacity = 1;
});
t_onReady(function() {
var rec = document.querySelector("#rec303274648");
if (!rec) return;
var wrapperBlock = rec.querySelector(".t466");
if (!wrapperBlock) return;
t_onFuncLoad('t_menu__highlightActiveLinks', function () {
t_menu__highlightActiveLinks('.t466__item a');
});
}); </script><style>#rec303274648 .t-menu__link-item{
}
@supports (overflow:-webkit-marquee) and (justify-content:inherit)
{
#rec303274648 .t-menu__link-item,
#rec303274648 .t-menu__link-item.t-active {
opacity: 1 !important;
}
}</style></div></header><!--/header--><div id="rec659765726" class="r t-rec" style=" " data-animationappear="off" data-record-type="131" ><!-- T123 --><div class="t123" ><div class="t-container_100 "><div class="t-width t-width_100 ">

			<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Chatbox and Settings</title>
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <style>
    /* Custom CSS */
    .chat-body {
      height: 400px;
      overflow-y: auto;
    }
    .message.received p {
      background-color: #e6e6e6;
    }
    .message.sent p {
      background-color: #007bff;
      color: #fff;
    }
    .chat-footer textarea {
      width: 80%;
    }
  </style>
</head>
<body style="margin: 0 10%;">

<div class="container-fluid" >
  <div class="row">
    <!-- Settings -->
    <div class="col-md-6">
      <h2>Settings</h2>
      <form id="configForm">
        <!-- RapidAPI Key -->
        <label for="apiKey">Rapid API Key(<a href="https://rapidapi.com/moshnoi2000-46FTkD0nFtO/api/leadbot" target="blank">get it here</a>):</label>
        <input type="password" id="apiKey" name="apiKey" placeholder="Your RapidAPI Key">
        
        <!-- Payload Fields -->
        <!-- With Labels and Default Values -->
<br/>
<label for="bot_name">Bot Name</label>
<textarea class="form-control mt-2" id="bot_name">LeadBot</textarea>

<label for="company_name">Company Name</label>
<textarea class="form-control mt-2" id="company_name">YC</textarea>

<label for="context">Context</label>
<textarea class="form-control mt-2" id="context">Startup School is a free online course on how to start a startup. Go at your own pace. It will take approximately 7 weeks if you spend 1-2 hours/week.</textarea>

<label for="interested_in">Interested In</label>
<textarea class="form-control mt-2" id="interested_in">applying to the program</textarea>

<label for="questions_about">Questions About</label>
<textarea class="form-control mt-2" id="questions_about">startup school program</textarea>


<p>Indicate the fields schema</p>
  <div class="inline-form d-flex align-items-center mb-3">
    <!-- Text Input for Field Name -->
    <div class="form-group mr-2">
        <input type="text" class="form-control" placeholder="Field Name">
    </div>


    <!-- Text Input for Description -->
    <div class="form-group mr-2">
        <input type="text" class="form-control" placeholder="Description">
    </div>

    <!-- Add Field Button -->
    <button type="button" id="addField" class="btn btn-primary">Add Field</button>
</div>
  

      </form>

      <!-- Contact Fields Table -->
      <table id="fieldsTable" class="table mt-3">
        <thead>
          <tr>
            <th>Field Name</th>
            <th>Description</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
<tr><td>first_name</td><td>user first name</td><td><button class="btn btn-danger deleteBtn">X</button></td></tr>
        </tbody>
      </table>

<button onclick="copy();" class="btn btn-primary ml-auto align-self-center">Copy payload</button>

    </div>


  
    <!-- Chatbox -->
    <div class="col-md-6">
      <div class="chat-box">
        <div class="chat-header d-flex">
          <h2 id="contact-name">LeadBot</h2>
          <button id="restartb" class="btn btn-danger ml-auto align-self-center">Restart</button>
        </div>
        <div class="chat-body" style="min-height:70%;">
         <div class="message received"><p>bot: I am Leadbot. I can answer your questions. But first, what is your name?</p></div>
        </div>
        <div class="chat-footer">
          <textarea id="message-input" placeholder="Write a message..."></textarea>
          <button id="sendMessage" class="btn btn-primary">Send</button>
	<br>
	<p id="contact_data">Contact Data:</p>
        </div>
      </div>
    </div>
  </div>
</div>

<script>

function copy(){

var message = $("#message-input").val();
    var botName = $("#bot_name").val();
    var companyName = $("#company_name").val();
    var context = $("#context").val();
    var interestedIn = $("#interested_in").val();
    var questionsAbout = $("#questions_about").val();

	if(context==''){alert('context is required!');return;}
	if(interestedIn==''){alert('interestedIn is required!');return;}

    // Get contact_fields values from the table
    var contactFields = {};
    $("#fieldsTable tbody tr").each(function() {
      var fieldName = $(this).find("td").eq(0).text();
      var description = $(this).find("td").eq(1).text();
      contactFields[fieldName] = description;
    });

if(contactFields == {}){alert("add fields!");return;}

    // Prepare the payload
    var payload = {
      "message": "add message here",
      "bot_name": botName,
      "company_name": companyName,
      "interested_in": interestedIn,
      "questions_about": questionsAbout,
      "contact_fields": contactFields,
      'conversation_id': "add conversation id here",
      "context": context
    };

	copyToClipboard(JSON.stringify(payload));
alert('copied');
}

var copyToClipboard = str => {
      try{
        navigator.clipboard.writeText(str)
        // return
    }catch (error) {
        console.error(error);
          const el = document.createElement('textarea');
          el.value = str;
          // console.log()
          el.setAttribute('readonly', '');
          el.style.position = 'absolute';
          el.style.left = '-9999px';
          document.body.appendChild(el);
          el.select();

          window.getSelection().removeAllRanges(); 
            var range = document.createRange();
            range.selectNodeContents(el);
            window.getSelection().addRange(range);

        var successful = document.execCommand('copy');

        console.log(successful);

          // document.execCommand('copy');
          document.body.removeChild(el);
    }
};


  // Add field to table
  $("#addField").click(function() {
    let row = $("<tr>")
      .append($("<td>").text($("input[placeholder='Field Name']").val()))
     // .append($("<td>").text($("select").val()))
      .append($("<td>").text($("input[placeholder='Description']").val()))
      .append($("<td>").append($("<button>").text("X").addClass("btn btn-danger deleteBtn")));
    $("#fieldsTable tbody").append(row);
  });

  // Delete field from table
  $(document).on("click", ".deleteBtn", function() {
    $(this).closest("tr").remove();
  });

	 // Send message on button click
  $("#sendMessage").click(function() {
    sendMessage();
  });

  // Send message on Enter key press in the textarea
  $("#message-input").keypress(function(e) {
    if (e.which == 13) {  // Enter key pressed
      e.preventDefault();  // Prevent new line
      sendMessage();
    }
  });

	$('#restartb').click(function(){
	conversation_id='';
	//alert('session restarted!');
	$("#sendMessage").text("Send");
	$(".chat-body").html('<div class="message received"><p>bot: What is your name?</p></div>');
})

	var conversation_id = '';
  function sendMessage() {
	if($("#sendMessage").text()!="Send"){
	alert('wait to process last call');
	return
	}
    // Get values from input fields
    var apiKey = $("#apiKey").val();
    var message = $("#message-input").val();
    var botName = $("#bot_name").val();
    var companyName = $("#company_name").val();
    var context = $("#context").val();
    var interestedIn = $("#interested_in").val();
    var questionsAbout = $("#questions_about").val();

	if(apiKey==''){alert('apikey is required!');return;}
	if(message==''){alert('message is required!');return;}
	if(context==''){alert('context is required!');return;}
	if(interestedIn==''){alert('interestedIn is required!');return;}

    // Get contact_fields values from the table
    var contactFields = {};
    $("#fieldsTable tbody tr").each(function() {
      var fieldName = $(this).find("td").eq(0).text();
      var description = $(this).find("td").eq(1).text();
      contactFields[fieldName] = description;
    });

    // Prepare the payload
    var payload = {
      "message": message,
      "bot_name": botName,
      "company_name": companyName,
      "interested_in": interestedIn,
      "questions_about": questionsAbout,
      "contact_fields": contactFields,
      'conversation_id':conversation_id,
      "context": context
    };
	console.log(payload)
    // Set headers
    var headers = {
      "content-type": "application/json",
      "X-RapidAPI-Key": apiKey,
      "X-RapidAPI-Host": "leadbot.p.rapidapi.com"
    };

	$(".chat-body").append('<div class="message sent"><p>user:' + message + '</p></div>');
	$("#message-input").val("")
	$("#sendMessage").text("thinking...")

    // Make the POST request
    $.ajax({
      url: "https://leadbot.p.rapidapi.com/",
      type: "POST",
      headers: headers,
      data: JSON.stringify(payload),
      success: function(response) {
	console.log(response)
        // Add the answer to the chat body
        $(".chat-body").append('<div class="message received"><p>bot: ' + response['answer'] + '</p></div>');
$("#sendMessage").text("Send");
	for(var k in response.contact_info){
		$('#contact_data').append('<br>'+k+':'+response.contact_info[k])
	}
	conversation_id = response.conversation_id;
      },
      error: function(xhr, status, error) {
        console.log("Error: " + error);
      }
    });
  }
</script>

</body>
</html>

			 
			
</div> </div></div></div><!--footer--><footer id="t-footer" class="t-records" data-hook="blocks-collection-content-node" data-tilda-project-id="3954701" data-tilda-page-id="18776572" data-tilda-formskey="ee476770ee9d855b5902a67fbf75a79b" data-tilda-lazy="yes" ><div id="rec496530285" class="r t-rec t-rec_pt_90 t-rec_pb_90" style="padding-top:90px;padding-bottom:90px; " data-record-type="191" ><!-- T142 --><div class="t142"><div class="t-container_100"><div class="t142__wrapone"><div class="t142__wraptwo"><a class="t-btn t142__submit t-btn_md"
href="https://calendly.com/aiconsultant/15min" target="" 
style="color:#000000;border:3px solid #000000;" 
><span class="t142__text">Book a free consultation</span></a></div></div></div></div><script>t_onReady(function () {
t_onFuncLoad('t142_checkSize', function () {
t142_checkSize('496530285');
});
});
window.addEventListener('load', function () {
t_onFuncLoad('t142_checkSize', function () {
t142_checkSize('496530285');
});
});</script></div><div id="rec303275023" class="r t-rec" style="background-color:#111111; " data-animationappear="off" data-record-type="345" data-bg-color="#111111"><!-- T345 --><div class="t345" id="footer_303275023"><div class="t345-wrapper" style="border-top: 1px solid;border-top-color: #292929;"><div class="t345-container t-container"><div class="t345-col t-col t-col_12"><div class="t345-content" style="height:120px"><div class="t345-text__wrapper"><div class="t345-text t-descr t-descr_xxs" style="color:#ffffff;"><span style="font-weight: 600;">© All Rights Reserved. MLHEAP.COM</span></div></div><div class="t345-socials"></div></div></div></div></div></div><script>function checkSize_303275023(){
var rec = document.querySelector('#footer_303275023');
if (!rec) return;
var textContentEl = rec.querySelector('.t345-text');
var iconsContentEl = rec.querySelector('.t345-socials');
if (!textContentEl || !iconsContentEl) return;
var contentWidth = textContentEl.offsetWidth + iconsContentEl.offsetWidth;
var container = rec.querySelector('.t345-container');
var containerWidth = container.offsetWidth - 30;
if (contentWidth > containerWidth && containerWidth > 0) {
container.classList.add('t345-socials_block');
}
else {
container.classList.remove('t345-socials_block');
}
}
t_onReady(function() {
t_onFuncLoad('checkSize_303275023', function(){
checkSize_303275023();
window.addEventListener('resize', t_throttle(function(){checkSize_303275023();}));
if (typeof jQuery !== 'undefined') {
$('#rec303275023').bind('displayChanged', function () {
checkSize_303275023();
});
} else {
var rec = document.querySelector('#rec303275023');
if (!rec) return;
rec.addEventListener('displayChanged', function () {
checkSize_303275023();
});
}
});
});</script></div></footer><!--/footer--></div><!--/allrecords--><!-- Tilda copyright. Don't remove this line --><div class="t-tildalabel " id="tildacopy" data-tilda-sign="3954701#40800558"><a href="https://tilda.cc/?upm=3954701" class="t-tildalabel__link"><div class="t-tildalabel__wrapper"><div class="t-tildalabel__txtleft">Made on </div><div class="t-tildalabel__wrapimg"><img src="images/tildacopy.png" class="t-tildalabel__img" fetchpriority="low" alt=""></div><div class="t-tildalabel__txtright">Tilda</div></div></a></div><!-- Stat --><script type="text/javascript">if (! window.mainTracker) { window.mainTracker = 'tilda'; }
setTimeout(function(){ (function (d, w, k, o, g) { var n=d.getElementsByTagName(o)[0],s=d.createElement(o),f=function(){n.parentNode.insertBefore(s,n);}; s.type = "text/javascript"; s.async = true; s.key = k; s.id = "tildastatscript"; s.src=g; if (w.opera=="[object Opera]") {d.addEventListener("DOMContentLoaded", f, false);} else { f(); } })(document, window, 'a0e1ce27b9610c93071a03d7ad301610','script','js/tilda-stat-1.0.min.js');
}, 2000); </script></body></html>